Object.defineProperty(exports,"__esModule",{value:!0});var setState=function(t){var e;void 0===t&&(t={});for(var n=[],r=arguments.length-1;0<r--;)n[r]=arguments[r+1];if(0===n.length)return t;var a=n.shift();return"function"==typeof a?setState.apply(void 0,[a(t)].concat(n)):0===n.length?a:"number"==typeof a&&Array.isArray(t)?((t=[].concat(t))[a]=setState.apply(void 0,[t[a]].concat(n)),t):Object.assign({},t,((e={})[a]=setState.apply(void 0,[t[a]].concat(n)),e))},getState=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];if(0===e.length)return t;var r=e.shift();return"function"==typeof r?getState.apply(void 0,[r(t)].concat(e)):0===e.length?t[r]:getState.apply(void 0,[t[r]].concat(e))},createSelector=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return getState.apply(void 0,[t].concat(e))}},chain=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n){return e.reduce(function(t,e){return e(t,n)},t)}},constants={},handlers={},initialStateBuffer=[{pending:{},succeeded:{},failed:{}}],addConstant=function(t){return constants[t]=t},addInitialState=function(t){return initialStateBuffer.push(t)},addHandler=function(t,e){return handlers[t]=e},setSucceeded=function(e){return function(t){return setState(t,"succeeded",e,!0)}},setFailed=function(e){return function(t){return setState(t,"failed",e,!0)}},setIsPending=function(e){return function(t){return setState(t,"pending",e,!0)}},setNotPending=function(e){return function(t){return setState(t,"pending",e,!1)}},trimPayload=function(t){return 1===t.length?t[0]:t},SUCCESS="_SUCCESS",FAILURE="_FAILURE",createAsyncAction=function(a,t){var i=t.async,e=t.handler,n=t.errorHandler;return addHandler(a,setIsPending(a)),addHandler(a+SUCCESS,chain(setNotPending(a),setSucceeded(a),e)),addHandler(a+FAILURE,chain(setNotPending(a),setFailed(a),n||e)),function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return function(e,t){var n=t();if(!n.pending[a])return e({type:a}),i(trimPayload(r),n,e).then(function(t){return e({type:a+SUCCESS,payload:t})},function(t){return e({type:a+FAILURE,error:t})})}}},defaultHandler=function(t){return t},createAction=function(a,t){void 0===t&&(t={});var e=t.async,n=t.handler;void 0===n&&(n=defaultHandler);var r=t.errorHandler;void 0===r&&(r=defaultHandler);var i=t.initialState;return void 0===i&&(i={}),addConstant(a),addInitialState(i),e?createAsyncAction(a,{async:e,handler:n,errorHandler:r}):(addHandler(a,n),function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var r=trimPayload(t&&t.hasOwnProperty("nativeEvent")?e:[t].concat(e));return{type:a,payload:r}})},initialState=function(t){return initialStateBuffer.reduce(function(t,e){return Object.assign({},t,e)},{})},reducer=function(t,e){void 0===t&&(t=initialState()),void 0===e&&(e={});var n=e.type,r=e.payload,a=e.error;return t.pending&&t.succeeded&&t.failed||(t=Object.assign({},t,initialState())),handlers.hasOwnProperty(n)?handlers[n](t,r,a):t};exports.constants=constants,exports.createAction=createAction,exports.createSelector=createSelector,exports.default=reducer,exports.setState=setState;
